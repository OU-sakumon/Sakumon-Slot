# マニュアル

## 問題ファイルの作成について

作成手順は以下の手順で行ってください。

1. `docs/シート構成ルール.md`に沿って左・中央・右の各パーツの問題と属性を設定する。
2. [解答作成ツール](https://ou-sakumon.github.io/Sakumon-Slot/dev/解答作成ツール/index.html)の指示に従って解答を作成する。
3. `dev/画像作成ツール/make_problemImages.py`を起動して問題の画像を作成する。
4. 必要に応じて問題のデバッグを[解答入力ツール](https://ou-sakumon.github.io/Sakumon-Slot/dev/解答入力ツール/index.html )で行う。
5. `slot_stop.mp3`, `answer_correct.mp3`, `answer_miss.mp3`を加えると、効果音を設定することができます。(その他の効果音の設定は不要です。)
6. 全てを1つの`zip`ファイルとしてまとめる。

### 注意事項

#### スロット.xlsxについて

スロットに登場する問題は、`スロット.xlsx`に登録してください。構成ルールなどは`docs/シート構成ルール.md`をご覧ください。
サンプルの問題セットとして、`サンプル問題.zip`を用意しています。これを展開すると、サンプルの`スロット.xlsx`が見れます。また、この`zip`をアップロードすると、サンプル問題でプレイができます。

#### 解答作成ツールについて
このツールは問題の解答をAIを用いて一括で作成するツールです。
以下の注意点を留意して利用ください。
- 解答の列、誤答の列を空欄にしていると、スロットに登場しません。
- このツールでは、Ansシートにまだ加えられていない問題のみを追加します。
- 問題の追加に伴いAnsシートを書き直す必要がある場合、それまでのAnsシートを一度リセットする必要はありません。
- AI解答を作成する際は、正確化・効率化を考えて、おおよそ100問ずつ入力することをお勧めします。

#### 解答入力ツールについて

このツールはAI解答を効率よく修正できるツールです。
AI解答をインポートした`スロット.xlsx`をアップロードし、問題と解答を確認しながら修正を行うことができます。


#### 画像作成ツール

このツールは問題・解答の画像をTeXを介してpngに変換するツールです。
このツールで作成した画像フォルダと、解答作成ツールを用いて作成した`スロット.xlsx`を1つのzipファイルにまとめると、スロットにアップロードするzipファイルが完成します。


## その他マニュアル

### TeX関連

- `\dfrac`ではなく、`\d\frac`にする
- 数字だけが答えの場合は`(数字)`とするのではなく、`$(数字)$`にする。
- `$\triangle ABC$`ではなく、`$\triangle \mathrm{ABC}$`にする。
- 句読点は`,.`に統一する。



## カスタマイズ

### 問題データの変更
`スロット.xlsx`ファイルを編集して、新しい問題を追加できます。

### デザインの変更
`index.html`の`<style>`セクションを編集して、見た目をカスタマイズできます。

### 音響の調整
`slot-audio.js`の`masterVolume`プロパティを変更して音量を調整できます。

### ゲーム設定の変更
`slot-logic.js`で以下の設定を変更できます：
- 制限時間（デフォルト: 60秒）
- スロットが停止するまでの時間（デフォルト: 3秒）
- 問題の重複回避設定

### デバッグ機能
ブラウザのコンソールで以下のコマンドが使用できます：
- `getSlotDebugInfo()` - デバッグ情報を表示
- `getCurrentSlotState()` - 現在のスロット状態を確認
